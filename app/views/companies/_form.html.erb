
<%= form_for @company do |f| %>

    <% if @company.errors.any? %>
        <div id="error_explanation">
            <h2>
            <%= pluralize(@company.errors.count, "error") %>
            prohibited this company from being saved:
            </h2>
        
            <ul>
            <% @company.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
            <% end %>
            </ul>
        </div>
    <% end %>

    <h3>Company</h3>
    
    <%= f.hidden_field :user_id, value: current_user.id %><br><br>
    
    <%= f.label :company_name %>
    <%= f.text_field :company_name %><br><br>

    <%= f.label :company_address %>
    <%= f.text_field :company_address %><br><br>

    <%= f.label :contact_position %>
    <%= f.text_field :contact_position %><br><br>

    <%= f.label :contact_work_phone %>
    <%= f.text_field :contact_work_phone %><br><br>

    <%= f.label :contact_cell_phone %>
    <%= f.text_field :contact_cell_phone %><br><br>

    <%= f.label :contact_email %>
    <%= f.text_field :contact_email %><br><br>

    <%= f.label :company_notes %>
    <%= f.text_area :company_notes %><br><br>

    <%= f.label :contact_notes %>
    <%= f.text_area :contact_notes %><br><br>

    <%= f.label :last_meeting %>
    <%= f.datetime_select :last_meeting, {:ampm => true} %><br><br>

    <%= f.label :last_meeting_notes %>
    <%= f.text_area :last_meeting_notes %><br><br>

    <h3>Contact:</h3>

    <%= f.fields_for :contacts do |contact| %>

        <%= contact.label :name %>
        <%= contact.text_field :name %><br><br>

        <label>Company Primary Contact</label>
        <input type='checkbox' name='company[contacts_attributes][0][primary_contact]'><br><br>

        <%= contact.label :photo %>
        <%= contact.text_field :photo %><br><br>

        <%= contact.label :contact_type %>
        <%= contact.text_field :contact_type %><br><br>
        
        <%= contact.label :relationship %>
        <%= contact.text_field :relationship %><br><br>

        <%= contact.label :home_phone %>
        <%= contact.text_field :home_phone %><br><br>

        <%= contact.label :cell_phone %>
        <%= contact.text_field :cell_phone %><br><br>

        <%= contact.label :work_phone %>
        <%= contact.text_field :work_phone %><br><br>    

        <%= contact.label :personal_email %>
        <%= contact.text_field :personal_email %><br><br>

        <%= contact.label :work_email %>
        <%= contact.text_field :work_email %><br><br>

        <%= contact.label :home_address %>
        <%= contact.text_field :home_address %><br><br>

        <%= contact.label :work_address %>
        <%= contact.text_field :work_address %><br><br>

        <%= contact.label :contact_notes %>
        <%= contact.text_area :contact_notes %><br><br>

    <% end %> 

    <%= f.submit 'Submit company' %><br>
<% end %>

